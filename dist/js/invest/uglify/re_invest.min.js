/**
*jef coding - time:2017-01-11 12:17,这可能是我最后一次code in YBL
* @authors qq:1737752975
* @version 1.0.0
* @link 
* @link time:2017-01-11 12:17,这可能是我最后一次code in YBL
* @license ISC
*/
!function(t){function e(s){if(o[s])return o[s].exports;var a=o[s]={exports:{},id:s,loaded:!1};return t[s].call(a.exports,a,a.exports,e),a.loaded=!0,a.exports}var o={};return e.m=t,e.c=o,e.p="",e(0)}([function(t,e,o){t.exports=o(1)},function(t,e,o){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}function a(t){var e=t.val().trim().match(/\d+/),o=e&&e[0];if(o>0){$(".js-invest-babel").hide(),(o>+d||o>h)&&(o=parseInt(Math.min(+d,h),10),console.log(+d+"_"+h));var s=c.default.NoToChinese(o);$(".js-bignum").show().html(s+"整"),t.val(o),console.log(s)}else"0"==o&&(o=""),t.val(o),$(".js-invest-babel").show(),$(".js-bignum").hide();+o>=+r?$(".js-footer").addClass("selected").removeClass("unselected"):$(".js-footer").addClass("unselected").removeClass("selected")}function i(t){$(".tips-msg").html(t),$(".showMegCommon").removeClass("msgbox-hide")}var n=o(2),c=s(n),l=+c.default.rootSize.replace("px","")/75,r=void 0,d=void 0,h=void 0,u=c.default.GetQueryString("productNo"),p=void 0;!function(){$("input").val(""),$.ajax({type:"POST",dataType:"json",url:"/yblapp/ws/wxuser/query_UserLoginVld",success:function(e){return console.log(e),!!e&&(p=e,t(e),n(),void 0)},error:function(){console.log("用户登录失败")}});var t=function(t){$.ajax({type:"POST",url:"/yblapp/ws/invest/query_InvestProductDeatil",dataType:"json",data:{productNo:u},success:function(e){console.log(e),d=e.PRO_RAISE_AMT-e.PRO_REAL_RAISE_AMT,r=e.PRO_LEAST_AMT,s(d,null),d>0?($(".js-head-title").html(e.PRO_NAME),$(".js-head-rate .old-rate").html(e.PRO_YEAR_RATE+"%+"+(parseFloat(t.vipRate)>0?t.vipRate:"vip")+"%"),$(".js-repay-time").html(e.PRO_REPAY_TIME.split(" ")[0]),$(".js-can-invest").html(c.default.getDotNum(d))):i("该项目已经募集成功")},error:function(){console.log("请求项目信息失败")}})},e=null,o=null,s=function(t,s){e=e||t,o=o||s,e&&o&&$(".js-insert-all-money").click(function(){m(e,o)})},n=function(){$.ajax({type:"POST",url:"/yblapp/ws/member/query_InvestAccountInfoByUserId",dataType:"json",success:function(t){console.log(t);var e=JSON.parse(t.resultData).usableMoney;h=+e.split(",").join(""),$(".js-useable-money").html(e),s(null,h)}}),$.ajax({type:"POST",url:"/yblapp/ws/invest/query_TicketListByUserId",dataType:"json",data:{couponStat:"1",goodTypeItem:"C00070202",productNo:u,pageNo:1,pageSize:100},success:function(t){console.log(t);var e="",o="",s=0;t.resultData.list.map(function(t,a){"EBL2016122600001"===t.GOODS_NO?o+='\n\t\t\t\t\t\t\t<li class="head-ticket ticket-opacity js-ticket-item" data-id = "'+t.COUPON_NO+'">\n\t\t\t\t\t\t\t\t<span class="ticket-item-logo ticket-choose-gray"></span>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t':e+='\n\t\t\t\t\t\t\t<li class="ticket-item ticket-opacity js-ticket-item ticket-'+10*t.COUPON_RATE+'" data-rate="'+t.COUPON_RATE+'" data-id = "'+t.COUPON_NO+'">\n\t\t\t\t\t\t\t\t<span class="ticket-item-logo ticket-choose-gray"></span>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t',s+=1}),s>0?($(".js-ticket-list").html(o+e).css({width:252*l*s-50*l+"px"}),$(".jiaxi-num").html("有加息券可用"),$(".js-jiaxi-box").click(function(){var t=$(".js-ticket-list");t.height()>0?(t.hide(),$(".jiaxi-arrow").removeClass("arrow-position-y")):(t.show(),$(".jiaxi-arrow").addClass("arrow-position-y"))})):($(".jiaxi-num").html("去获取加息券"),$(".jiaxi-arrow").addClass("arrow-position-x"),$(".js-jiaxi-box").click(function(){location.href="/yblapp/mpbweb/html/elephant/elephant_shop.html"}))},error:function(){console.log("获取加息券失败")}})};null!==u&&u.toString().length>0&&$(".js-item-detail").click(function(){location.href="/yblapp/mpbweb/html/invest/invest_details.html?productNo="+u});var m=function(t,e){var o=t<e?t:e,s=$(".js-invest-input");s.val(o),a(s)}}(),$(".js-msg-box-hide").click(function(){$(".msgBox").hide(),$(".showMegCommon").addClass("msgbox-hide")}),!function(){var t=void 0,e=$(".js-invest-input");e.on("input",function(){a(e)}),$(".js-recharge").click(function(){location.href="/yblapp/mpbweb/html/user/recharge.html"}),$(".js-ticket-list").on("click",".ticket-item",function(){var e=$(this).children(".ticket-choosed");if($(".js-ticket-item").addClass("ticket-opacity"),e.length>0)t="",e.removeClass("ticket-choosed").addClass("ticket-choose-gray"),$(".js-head-rate .vip-rate").html("");else{$(".ticket-choosed").addClass("ticket-choose-gray").removeClass("ticket-choosed"),$(this).removeClass("ticket-opacity"),$(this).children(".ticket-item-logo").removeClass("ticket-choose-gray").addClass("ticket-choosed");var o=$(this).data("rate");t=$(this).data("id"),$(".js-head-rate .vip-rate").html("+"+o+"%")}}),$(".js-ticket-list").on("click",".head-ticket",function(){if($(".js-ticket-item").addClass("ticket-opacity"),$(this).children(".ticket-choosed").length>0)t="",$(this).children(".ticket-choosed").removeClass("ticket-choosed").addClass("ticket-choose-gray"),$(".js-head-rate .vip-rate").html("");else{$(".ticket-choosed").addClass("ticket-choose-gray").removeClass("ticket-choosed"),$(this).removeClass("ticket-opacity"),$(this).children(".ticket-item-logo").removeClass("ticket-choose-gray").addClass("ticket-choosed");var e=.5;t=$(this).data("id"),$(".js-head-rate .vip-rate").html("+"+e+"%")}}),$(".invest-content").on("click",".selected",function(){$(".msgBox").show(),$(".payment").removeClass("msgbox-hide"),$(".payment-yzm-img").click()}),$(".payment-yzm-img").click(function(){$(this).attr("src","/yblweb/ws/common/query_PicVcode?"+(new Date).getTime())}),console.log(c.default.base64encode("a123456")),$(".js-sure-invert").click(function(){$(".payment").addClass("msgbox-hide"),1==p.uCtype||2==p.uCtype?$.ajax({type:"POST",url:"/yblapp/ws/tradeConfirm/save_InvestTradeInfo",dataType:"json",data:{productNo:u,couponNo:t,tradeCostAmt:$(".js-invest-input").val(),payPassword:c.default.base64encode($(".js-payment-insert").val().trim())},success:function(t){console.log(t),"10001"===t.resultCode?($(".payment-head").append('<div class="tips-msg-yaoqing">邀请好友来投资，可领取更多大象金币</div>'),$(".js-msg-box-hide").unbind("click"),$(".payment-foot-left").html("邀请好友").click(function(t){t.stopPropagation(),location.href="/yblapp/mpbweb/html/user/invite.html"}),$(".payment-foot-right").html("我的投资记录").click(function(t){t.stopPropagation(),location.href="/yblapp/mpbweb/html/invest/project_invested_list.html?investState=1"}),i("恭喜您，已成功投资")):i(t.resultInfo)},error:function(){console.log("投资提交错误")}}):i("融资方不允许投资")}),$(".js-cancel-invert").click(function(){$(".msgBox").hide(),$(".js-payment-insert").val(""),$(".payment-yzm-input").val("")})}()},function(t,e){"use strict";function o(t){if(!/^\d*(\.\d*)?$/.test(t))return!1;for(var e=new Array("零","壹","贰","叁","肆","伍","陆","柒","捌","玖"),o=new Array("","拾","佰","仟","万","亿","点",""),s=(""+t).replace(/(^0*)/g,"").split("."),a=0,i="",n=s[0].length-1;n>=0;n--){switch(a){case 0:i=o[7]+i;break;case 4:new RegExp("0{4}\\d{"+(s[0].length-n-1)+"}$").test(s[0])||(i=o[4]+i);break;case 8:i=o[5]+i,o[7]=o[5],a=0}a%4==2&&0!=s[0].charAt(n+2)&&0==s[0].charAt(n+1)&&(i=e[0]+i),0!=s[0].charAt(n)&&(i=e[s[0].charAt(n)]+o[a%4]+i),a++}if(s.length>1){i+=o[6];for(var n=0;n<s[1].length;n++)i+=e[s[1].charAt(n)]}return i}function s(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),o=window.location.search.substr(1).match(e);return null!=o?unescape(o[2]):null}function a(t){var e=String(t).split(".")[0],o=[],s=e.length;if(s-3<=0)return t;for(var a=-3;a>-s;a-=3)o.push(e.substr(a,3));return 3*o.length!==s&&o.push(e.slice(0,s-3*o.length)),o.reverse().join(",")}function i(t,e){$.ajax({type:"GET",dataType:"json",data:{captcha:t},url:"/yblweb/ws/common/check_PicVcode",success:function(t){e(t)},error:function(){console.log("图片验证码请求错误")}})}function n(t){var e,o,s,a,i,n;for(s=t.length,o=0,e="";o<s;){if(a=255&t.charCodeAt(o++),o==s){e+=l.charAt(a>>2),e+=l.charAt((3&a)<<4),e+="==";break}if(i=t.charCodeAt(o++),o==s){e+=l.charAt(a>>2),e+=l.charAt((3&a)<<4|(240&i)>>4),e+=l.charAt((15&i)<<2),e+="=";break}n=t.charCodeAt(o++),e+=l.charAt(a>>2),e+=l.charAt((3&a)<<4|(240&i)>>4),e+=l.charAt((15&i)<<2|(192&n)>>6),e+=l.charAt(63&n)}return e}function c(){return document.querySelector("html").style.fontSize}Object.defineProperty(e,"__esModule",{value:!0});var l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";new Array((-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),62,(-1),(-1),(-1),63,52,53,54,55,56,57,58,59,60,61,(-1),(-1),(-1),(-1),(-1),(-1),(-1),0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,(-1),(-1),(-1),(-1),(-1),(-1),26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,(-1),(-1),(-1),(-1),(-1));e.default={NoToChinese:o,GetQueryString:s,getDotNum:a,getCaptchaImg:i,base64encode:n,rootSize:c}}]);